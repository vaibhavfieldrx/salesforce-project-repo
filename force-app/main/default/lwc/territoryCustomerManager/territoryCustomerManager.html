<template>
    <div class="page">

        <div class="header">
            <h1>Territory & Customer Management</h1>
            <p>View and manage customers by sales territory</p>
        </div>

        <div class="layout">

            <div class="left-panel">

                <div class="search-bar">
                    <lightning-input
                        type="search"
                        placeholder="Search customers..."
                        onchange={handleSearch}>
                    </lightning-input>
                </div>

                <template for:each={filteredCustomers} for:item="cust">
                    <div
                        key={cust.accountId}
                        class="customer-card"
                        data-id={cust.accountId}
                        onclick={selectCustomer}>

                        <div class="avatar-circle">
                            <lightning-icon
                                icon-name="utility:user"
                                size="small">
                            </lightning-icon>
                        </div>

                        <div class="customer-info">
                            <div class="cust-name">{cust.name}</div>
                            <div class="cust-email">{cust.email}</div>
                        </div>

                        <div class={cust.statusClass}>
                            {cust.status}
                        </div>
                    </div>
                </template>

                <template if:false={filteredCustomers.length}>
                    <lightning-card>
                        <div class="empty-left">
                            No customers found
                        </div>
                    </lightning-card>
                </template>

                <template if:true={showPagination}>
                    <div class="pagination">
                        <lightning-button-icon
                            icon-name="utility:chevronleft"
                            onclick={handlePrev}
                            disabled={disablePrev}>
                        </lightning-button-icon>

                        <span class="page-info">
                            Page {currentPage} of {totalPages}
                        </span>

                        <lightning-button-icon
                            icon-name="utility:chevronright"
                            onclick={handleNext}
                            disabled={disableNext}>
                        </lightning-button-icon>
                    </div>
                </template>
            </div>

<div class="right-panel">
    <template if:true={selectedCustomer}>
        <div class="detail-card">

            <!-- Header -->
            <div class="detail-header">
                <div class="avatar-circle large">
                    <lightning-icon
                        icon-name="utility:user"
                        size="medium">
                    </lightning-icon>
                </div>

                <div class="header-info">
                    <h2>{selectedCustomer.name}</h2>
                    <span class={selectedCustomer.statusClass}>
                        {selectedCustomer.status}
                    </span>
                </div>
            </div>

            <div class="detail-row">
                <lightning-icon
                    icon-name="utility:email"
                    size="x-small">
                </lightning-icon>

                <div>
                    <div class="label">Email</div>
                    <div class="value">{selectedCustomer.email}</div>
                </div>
            </div>

            <div class="detail-row">
                <lightning-icon
                    icon-name="utility:call"
                    size="x-small">
                </lightning-icon>

                <div>
                    <div class="label">Phone</div>
                    <div class="value">{selectedCustomer.phone}</div>
                </div>
            </div>

            <div class="detail-row">
                <lightning-icon
                    icon-name="utility:location"
                    size="x-small">
                </lightning-icon>

                <div>
                    <div class="label">Address</div>
                    <div class="value">{selectedCustomer.address}</div>
                </div>
            </div>

            <div class="divider"></div>

            <div class="territory-block">
                <div class="label">Territory</div>
                <div class="value territory">
                    {selectedCustomer.territory}
                </div>
            </div>

        </div>
    </template>

    <template if:false={selectedCustomer}>
        <lightning-card>
            <div class="empty-right">
                Select a customer to view details
            </div>
        </lightning-card>
    </template>
</div>

        </div>
    </div>
</template>
